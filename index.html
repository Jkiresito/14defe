<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Two Hearts Smooth</title>
<style>
body{
    margin:0;
    overflow:hidden;
    background:#000;
    touch-action:none;
}
canvas{display:block;}
</style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

window.addEventListener("resize",()=>{
    canvas.width=innerWidth;
    canvas.height=innerHeight;
    init();
});

let hearts=[];
const pointer={x:null,y:null,radius:80};

window.addEventListener("mousemove",e=>{
    pointer.x=e.x;
    pointer.y=e.y;
});
window.addEventListener("touchmove",e=>{
    e.preventDefault();
    pointer.x=e.touches[0].clientX;
    pointer.y=e.touches[0].clientY;
},{passive:false});
window.addEventListener("touchend",()=>{
    pointer.x=null;
    pointer.y=null;
});

class Particle{
    constructor(x,y){
        this.x=Math.random()*canvas.width;
        this.y=Math.random()*canvas.height;
        this.baseX=x;
        this.baseY=y;
        this.size=2;
        this.density=Math.random()*15+5;
        this.vx=0;
        this.vy=0;
    }
    draw(){
        ctx.fillStyle="#ff6fb2";
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
        ctx.fill();
    }
    update(){
        if(pointer.x!==null){
            let dx=pointer.x-this.x;
            let dy=pointer.y-this.y;
            let dist=Math.sqrt(dx*dx+dy*dy);
            if(dist<pointer.radius){
                let force=(pointer.radius-dist)/pointer.radius;
                let dirX=dx/dist;
                let dirY=dy/dist;
                this.vx-=dirX*force*this.density*0.04;
                this.vy-=dirY*force*this.density*0.04;
            }
        }
        this.x+=this.vx;
        this.y+=this.vy;
        this.vx*=0.88;
        this.vy*=0.88;
        this.x+=(this.baseX-this.x)/18;
        this.y+=(this.baseY-this.y)/18;
        this.draw();
    }
}

class Heart{
    constructor(cx,cy,scale,text){
        this.cx=cx;
        this.cy=cy;
        this.scale=scale;
        this.text=text;
        this.particles=[];
        this.create();
    }
    create(){
        for(let t=0;t<Math.PI*2;t+=0.04){
            let x=16*Math.pow(Math.sin(t),3);
            let y=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);
            let px=this.cx+x*this.scale;
            let py=this.cy-y*this.scale;
            this.particles.push(new Particle(px,py));
        }
    }
    update(){
        this.particles.forEach(p=>p.update());
        this.drawText();
    }
    drawText(){
        ctx.save();
        ctx.font="bold 32px Arial";
        ctx.textAlign="center";
        ctx.fillStyle="#ffd1e8";
        ctx.fillText(this.text,this.cx,this.cy+10);
        ctx.restore();
    }
    explode(x,y){
        this.particles.forEach(p=>{
            let dx=p.x-x;
            let dy=p.y-y;
            let d=Math.sqrt(dx*dx+dy*dy)+0.1;
            let f=6;
            p.vx+=dx/d*f;
            p.vy+=dy/d*f;
        });
    }
}

function init(){
    hearts=[];
    const gap=canvas.width/3;
    hearts.push(new Heart(gap,canvas.height/2,9,"Te Amo monton mi cielo"));
    hearts.push(new Heart(gap*2,canvas.height/2,9,"Sos mÃ¡s que especial para mi"));
    hearts.push(new Heart(gap*1.5,canvas.height/6,10,"Feliz 14 de febrero mi vida"));
    hearts.push(new Heart(gap*1.5,canvas.height/1.3,10,"Sos mi todo mi chiquita linda"));
    
}

canvas.addEventListener("mousedown",e=>trigger(e.clientX,e.clientY));
canvas.addEventListener("touchstart",e=>{
    e.preventDefault();
    trigger(e.touches[0].clientX,e.touches[0].clientY);
},{passive:false});

function trigger(x,y){
    hearts.forEach(h=>h.explode(x,y));
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    hearts.forEach(h=>h.update());
    requestAnimationFrame(animate);
}

init();
animate();
</script>
</body>
</html>